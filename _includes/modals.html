<!-- Portfolio Modals -->
{% for post in site.posts %}
<head>
  <!-- Font Awesome CSS 추가 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>

<div class="portfolio-modal modal fade" id="portfolioModal-{{ post.modal-id }}" tabindex="-1" role="dialog"
  aria-hidden="true">
  <div class="modal-content">
    <div class="close-modal" data-dismiss="modal">
      <div class="lr">
        <div class="rl">
        </div>
      </div>
    </div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
          <div class="modal-body">
            <h2>{{ post.title }}</h2>
            <hr class="star-primary">
            <img src="img/portfolio/{{ post.img }}" class="img-responsive img-centered" alt="{{ post.alt }}">

            <ul class="list-inline item-details">
              {% if post.project-date %}
              <li>Date:
                <strong>{{ post.project-date }}</strong>
              </li>
              {% endif %}
              {% if post.animator %}
              <li>Animator:
                <strong>{{ post.animator }}</strong>
              </li>
              {% endif %}
            </ul>

            {% if post.description %}
            <p>{{ post.description }}</p>
            {% endif %}

            <div class="video-banner">
              <video metadata controls id="banner-video">
                <source src="video/portfolio/{{ post.video }}" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            </div>
            <button type="button" class="btn btn-default" data-dismiss="modal"><i class="fa fa-times"></i>
              Close</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endfor %}

<style>
  .video-banner {
    width: 100%;
    height: auto;
  }

  #banner-video {
    width: 100%;
    height: auto;
    max-height: 500px;
  }

  @media (max-width: 768px) {
    #banner-video {
      max-height: 300px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
  const closeButtons = document.querySelectorAll('[data-dismiss="modal"]');

  closeButtons.forEach(button => {
    button.addEventListener('click', function () {
      const modal = button.closest('.portfolio-modal');
      const video = modal.querySelector('video');
      if (video) {
        video.pause();
        video.currentTime = 0;
      }
    });
  });
});
</script>